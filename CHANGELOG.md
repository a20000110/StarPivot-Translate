# Change Log

All notable changes to the "StarPivot Translate" extension will be documented in this file.

## [1.2.4] - 2026-01-15

### Removed
- **配置项精简**: 移除了 `apiUrl`, `vendor`, `sourceLanguage`, `targetLanguage` 等配置项，统一采用内置默认配置。

### Changed
- **快捷键配置**: 新增快捷键配置引导，支持通过设置页面快速跳转至快捷键编辑器进行修改及冲突检测。
- **UI 优化**: 移除了翻译加载状态中的厂商信息（如 "Microsoft"）。

## [1.2.3] - 2026-01-15

### Changed
- **快捷键调整**: Mac 平台默认快捷键调整为 `Shift + Cmd + T`。

## [1.1.0] - 2026-01-14

### Added
- **缓存机制 (Cache)**: 新增内存缓存功能，默认缓存 24 小时内的翻译结果，减少重复请求，提升响应速度。
- **智能重试 (Retry)**: 针对网络超时及服务端错误 (5xx) 增加指数退避重试机制（默认 3 次），提高请求成功率。
- **自动降级 (Auto-switch)**: 当首选翻译引擎连续失败时，自动切换至备选引擎（如 Microsoft -> Ali），保障服务高可用。
- **并发限流 (Rate Limiting)**: 实现客户端 QPS 限流（默认 5 QPS），避免因高并发触发上游服务限流 (429)。

### Changed
- **服务层重构**: 引入 `TranslationService` 统一管理翻译流程，透明处理缓存、重试与降级逻辑。

## [1.0.0] - 2026-01-14

### Added
- **多厂商支持**: 新增 `starPivotTranslate.vendor` 配置项，支持切换翻译服务商。
  - 支持 `microsoft` (默认)
  - 支持 `ali` (阿里翻译)
- **参数校验**: 新增对翻译文本长度（最大 500 字符）及必填项的校验，防止无效请求。
- **错误处理**: 实现了统一的错误处理机制，针对网络超时、配额耗尽等情况提供更友好的错误提示。

### Changed
- **核心重构**: 重写了翻译核心逻辑，采用工厂模式与适配器模式，提升扩展性与稳定性。
- **配置更新**: `apiUrl` 配置项现在作为适配器的基础 URL 使用。

### Fixed
- 修复了网络请求在某些情况下无法正确解析错误响应的问题。
